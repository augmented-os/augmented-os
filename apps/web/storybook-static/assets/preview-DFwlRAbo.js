var ie=t=>{throw TypeError(t)};var te=(t,e,s)=>e.has(t)||ie("Cannot "+s);var a=(t,e,s)=>(te(t,e,"read from private field"),s?s.call(t):e.get(t)),y=(t,e,s)=>e.has(t)?ie("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),d=(t,e,s,i)=>(te(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),K=(t,e,s)=>(te(t,e,"access private method"),s);var X=(t,e,s,i)=>({set _(r){d(t,e,r,s)},get _(){return a(t,e,i)}});import{r as g,R as Y}from"./index-C6mWTJJr.js";import{S as ve,h as be,Q as Pe,n as Q,m as ae,R as Oe,c as Se,a as re,b as I,e as Qe,d as Ce,f as Me,g as Ee,o as ne,r as oe,i as Te,j as ue,p as le,s as De,k as ke}from"./QueryClientProvider-9W50J78D.js";import{D as $e}from"./DynamicUIStateContext-BrzZPoL3.js";import"./_commonjsHelpers-BosuxZz1.js";import"./jsx-runtime-BT65X5dW.js";var x,me,Ae=(me=class extends ve{constructor(e={}){super();y(this,x);this.config=e,d(this,x,new Map)}build(e,s,i){const r=s.queryKey,n=s.queryHash??be(r,s);let o=this.get(n);return o||(o=new Pe({client:e,queryKey:r,queryHash:n,options:e.defaultQueryOptions(s),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){a(this,x).has(e.queryHash)||(a(this,x).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=a(this,x).get(e.queryHash);s&&(e.destroy(),s===e&&a(this,x).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,x).get(e)}getAll(){return[...a(this,x).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(i=>ae(s,i))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(i=>ae(e,i)):s}notify(e){Q.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},x=new WeakMap,me),q,S,_,F,H,ye,xe=(ye=class extends Oe{constructor(e){super();y(this,F);y(this,q);y(this,S);y(this,_);this.mutationId=e.mutationId,d(this,S,e.mutationCache),d(this,q,[]),this.state=e.state||qe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){a(this,q).includes(e)||(a(this,q).push(e),this.clearGcTimeout(),a(this,S).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){d(this,q,a(this,q).filter(s=>s!==e)),this.scheduleGc(),a(this,S).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){a(this,q).length||(this.state.status==="pending"?this.scheduleGc():a(this,S).remove(this))}continue(){var e;return((e=a(this,_))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,o,v,b,T,D,m,w,k,P,p,E,C,M,h,u,l,O,j,$;const s=()=>{K(this,F,H).call(this,{type:"continue"})};d(this,_,Se({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(f,B)=>{K(this,F,H).call(this,{type:"failed",failureCount:f,error:B})},onPause:()=>{K(this,F,H).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>a(this,S).canRun(this)}));const i=this.state.status==="pending",r=!a(this,_).canStart();try{if(i)s();else{K(this,F,H).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(n=a(this,S).config).onMutate)==null?void 0:o.call(n,e,this));const B=await((b=(v=this.options).onMutate)==null?void 0:b.call(v,e));B!==this.state.context&&K(this,F,H).call(this,{type:"pending",context:B,variables:e,isPaused:r})}const f=await a(this,_).start();return await((D=(T=a(this,S).config).onSuccess)==null?void 0:D.call(T,f,e,this.state.context,this)),await((w=(m=this.options).onSuccess)==null?void 0:w.call(m,f,e,this.state.context)),await((P=(k=a(this,S).config).onSettled)==null?void 0:P.call(k,f,null,this.state.variables,this.state.context,this)),await((E=(p=this.options).onSettled)==null?void 0:E.call(p,f,null,e,this.state.context)),K(this,F,H).call(this,{type:"success",data:f}),f}catch(f){try{throw await((M=(C=a(this,S).config).onError)==null?void 0:M.call(C,f,e,this.state.context,this)),await((u=(h=this.options).onError)==null?void 0:u.call(h,f,e,this.state.context)),await((O=(l=a(this,S).config).onSettled)==null?void 0:O.call(l,void 0,f,this.state.variables,this.state.context,this)),await(($=(j=this.options).onSettled)==null?void 0:$.call(j,void 0,f,e,this.state.context)),f}finally{K(this,F,H).call(this,{type:"error",error:f})}}finally{a(this,S).runNext(this)}}},q=new WeakMap,S=new WeakMap,_=new WeakMap,F=new WeakSet,H=function(e){const s=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Q.batch(()=>{a(this,q).forEach(i=>{i.onMutationUpdate(e)}),a(this,S).notify({mutation:this,type:"updated",action:e})})},ye);function qe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var R,A,W,pe,Fe=(pe=class extends ve{constructor(e={}){super();y(this,R);y(this,A);y(this,W);this.config=e,d(this,R,new Set),d(this,A,new Map),d(this,W,0)}build(e,s,i){const r=new xe({mutationCache:this,mutationId:++X(this,W)._,options:e.defaultMutationOptions(s),state:i});return this.add(r),r}add(e){a(this,R).add(e);const s=Z(e);if(typeof s=="string"){const i=a(this,A).get(s);i?i.push(e):a(this,A).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(a(this,R).delete(e)){const s=Z(e);if(typeof s=="string"){const i=a(this,A).get(s);if(i)if(i.length>1){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}else i[0]===e&&a(this,A).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Z(e);if(typeof s=="string"){const i=a(this,A).get(s),r=i==null?void 0:i.find(n=>n.state.status==="pending");return!r||r===e}else return!0}runNext(e){var i;const s=Z(e);if(typeof s=="string"){const r=(i=a(this,A).get(s))==null?void 0:i.find(n=>n!==e&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Q.batch(()=>{a(this,R).forEach(e=>{this.notify({type:"removed",mutation:e})}),a(this,R).clear(),a(this,A).clear()})}getAll(){return Array.from(a(this,R))}find(e){const s={exact:!0,...e};return this.getAll().find(i=>re(s,i))}findAll(e={}){return this.getAll().filter(s=>re(e,s))}notify(e){Q.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Q.batch(()=>Promise.all(e.map(s=>s.continue().catch(I))))}},R=new WeakMap,A=new WeakMap,W=new WeakMap,pe);function Z(t){var e;return(e=t.options.scope)==null?void 0:e.id}function he(t){return{onFetch:(e,s)=>{var D,m,w,k,P;const i=e.options,r=(w=(m=(D=e.fetchOptions)==null?void 0:D.meta)==null?void 0:m.fetchMore)==null?void 0:w.direction,n=((k=e.state.data)==null?void 0:k.pages)||[],o=((P=e.state.data)==null?void 0:P.pageParams)||[];let v={pages:[],pageParams:[]},b=0;const T=async()=>{let p=!1;const E=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},C=Qe(e.options,e.fetchOptions),M=async(h,u,l)=>{if(p)return Promise.reject();if(u==null&&h.pages.length)return Promise.resolve(h);const O={client:e.client,queryKey:e.queryKey,pageParam:u,direction:l?"backward":"forward",meta:e.options.meta};E(O);const j=await C(O),{maxPages:$}=e.options,f=l?Ce:Me;return{pages:f(h.pages,j,$),pageParams:f(h.pageParams,u,$)}};if(r&&n.length){const h=r==="backward",u=h?Ie:ce,l={pages:n,pageParams:o},O=u(i,l);v=await M(l,O,h)}else{const h=t??n.length;do{const u=b===0?o[0]??i.initialPageParam:ce(i,v);if(b>0&&u==null)break;v=await M(v,u),b++}while(b<h)}return v};e.options.persister?e.fetchFn=()=>{var p,E;return(E=(p=e.options).persister)==null?void 0:E.call(p,T,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=T}}}function ce(t,{pages:e,pageParams:s}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,s[i],s):void 0}function Ie(t,{pages:e,pageParams:s}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,s[0],s):void 0}var c,G,L,U,V,N,z,J,ge,Re=(ge=class{constructor(t={}){y(this,c);y(this,G);y(this,L);y(this,U);y(this,V);y(this,N);y(this,z);y(this,J);d(this,c,t.queryCache||new Ae),d(this,G,t.mutationCache||new Fe),d(this,L,t.defaultOptions||{}),d(this,U,new Map),d(this,V,new Map),d(this,N,0)}mount(){X(this,N)._++,a(this,N)===1&&(d(this,z,Ee.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onFocus())})),d(this,J,ne.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onOnline())})))}unmount(){var t,e;X(this,N)._--,a(this,N)===0&&((t=a(this,z))==null||t.call(this),d(this,z,void 0),(e=a(this,J))==null||e.call(this),d(this,J,void 0))}isFetching(t){return a(this,c).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,G).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=a(this,c).build(this,e),i=s.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(oe(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return a(this,c).findAll(t).map(({queryKey:e,state:s})=>{const i=s.data;return[e,i]})}setQueryData(t,e,s){const i=this.defaultQueryOptions({queryKey:t}),r=a(this,c).get(i.queryHash),n=r==null?void 0:r.state.data,o=Te(e,n);if(o!==void 0)return a(this,c).build(this,i).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return Q.batch(()=>a(this,c).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=a(this,c);Q.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=a(this,c);return Q.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},i=Q.batch(()=>a(this,c).findAll(t).map(r=>r.cancel(s)));return Promise.all(i).then(I).catch(I)}invalidateQueries(t,e={}){return Q.batch(()=>(a(this,c).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},i=Q.batch(()=>a(this,c).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let n=r.fetch(void 0,s);return s.throwOnError||(n=n.catch(I)),r.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(i).then(I)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=a(this,c).build(this,e);return s.isStaleByTime(oe(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(I).catch(I)}fetchInfiniteQuery(t){return t.behavior=he(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(I).catch(I)}ensureInfiniteQueryData(t){return t.behavior=he(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ne.isOnline()?a(this,G).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,c)}getMutationCache(){return a(this,G)}getDefaultOptions(){return a(this,L)}setDefaultOptions(t){d(this,L,t)}setQueryDefaults(t,e){a(this,U).set(ue(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,U).values()],s={};return e.forEach(i=>{le(t,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(t,e){a(this,V).set(ue(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,V).values()],s={};return e.forEach(i=>{le(t,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,L).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=be(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===De&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,L).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,c).clear(),a(this,G).clear()}},c=new WeakMap,G=new WeakMap,L=new WeakMap,U=new WeakMap,V=new WeakMap,N=new WeakMap,z=new WeakMap,J=new WeakMap,ge),ee=["light","dark"],se="(prefers-color-scheme: dark)",Ke=typeof window>"u",we=g.createContext(void 0),He=t=>g.useContext(we)?t.children:g.createElement(Le,{...t}),Ge=["light","dark"],Le=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:r="theme",themes:n=Ge,defaultTheme:o=s?"system":"light",attribute:v="data-theme",value:b,children:T,nonce:D})=>{let[m,w]=g.useState(()=>de(r,o)),[k,P]=g.useState(()=>de(r)),p=b?Object.values(b):n,E=g.useCallback(u=>{let l=u;if(!l)return;u==="system"&&s&&(l=fe());let O=b?b[l]:l,j=e?je():null,$=document.documentElement;if(v==="class"?($.classList.remove(...p),O&&$.classList.add(O)):O?$.setAttribute(v,O):$.removeAttribute(v),i){let f=ee.includes(o)?o:null,B=ee.includes(l)?l:f;$.style.colorScheme=B}j==null||j()},[]),C=g.useCallback(u=>{let l=typeof u=="function"?u(u):u;w(l);try{localStorage.setItem(r,l)}catch{}},[t]),M=g.useCallback(u=>{let l=fe(u);P(l),m==="system"&&s&&!t&&E("system")},[m,t]);g.useEffect(()=>{let u=window.matchMedia(se);return u.addListener(M),M(u),()=>u.removeListener(M)},[M]),g.useEffect(()=>{let u=l=>{if(l.key!==r)return;let O=l.newValue||o;C(O)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)},[C]),g.useEffect(()=>{E(t??m)},[t,m]);let h=g.useMemo(()=>({theme:m,setTheme:C,forcedTheme:t,resolvedTheme:m==="system"?k:m,themes:s?[...n,"system"]:n,systemTheme:s?k:void 0}),[m,C,t,k,s,n]);return g.createElement(we.Provider,{value:h},g.createElement(Ne,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:s,enableColorScheme:i,storageKey:r,themes:n,defaultTheme:o,attribute:v,value:b,children:T,attrs:p,nonce:D}),T)},Ne=g.memo(({forcedTheme:t,storageKey:e,attribute:s,enableSystem:i,enableColorScheme:r,defaultTheme:n,value:o,attrs:v,nonce:b})=>{let T=n==="system",D=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${v.map(P=>`'${P}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,m=r?ee.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",w=(P,p=!1,E=!0)=>{let C=o?o[P]:P,M=p?P+"|| ''":`'${C}'`,h="";return r&&E&&!p&&ee.includes(P)&&(h+=`d.style.colorScheme = '${P}';`),s==="class"?p||C?h+=`c.add(${M})`:h+="null":C&&(h+=`d[s](n,${M})`),h},k=t?`!function(){${D}${w(t)}}()`:i?`!function(){try{${D}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${T})){var t='${se}',m=window.matchMedia(t);if(m.media!==t||m.matches){${w("dark")}}else{${w("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${w(o?"x[e]":"e",!0)}}${T?"":"else{"+w(n,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${D}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${w(o?"x[e]":"e",!0)}}else{${w(n,!1,!1)};}${m}}catch(t){}}();`;return g.createElement("script",{nonce:b,dangerouslySetInnerHTML:{__html:k}})}),de=(t,e)=>{if(Ke)return;let s;try{s=localStorage.getItem(t)||void 0}catch{}return s||e},je=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},fe=t=>(t||(t=window.matchMedia(se)),t.matches?"dark":"light");const _e=()=>new Re({defaultOptions:{queries:{retry:!1,staleTime:1e3*60*5,gcTime:1e3*60*10}}}),Xe={parameters:{controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}},backgrounds:{disable:!0},docs:{autodocs:"tag",defaultName:"Documentation"},options:{storySort:{order:["Dynamic UI",["Getting Started",["Introduction","Architecture","Getting Started"],"Implementation Guides",["Schema Guide","Validation System","Performance Guide"],"Examples",["Business Workflows","Task Management","Advanced Patterns"],"Testing",["Interaction Tests","Edge Case Tests"],"Development",["Schema Builder"]],"*"]}},viewport:{viewports:{mobile:{name:"Mobile",styles:{width:"375px",height:"667px"}},tablet:{name:"Tablet",styles:{width:"768px",height:"1024px"}},desktop:{name:"Desktop",styles:{width:"1440px",height:"900px"}},wide:{name:"Wide Desktop",styles:{width:"1920px",height:"1080px"}}}}},decorators:[t=>{const e=_e();return Y.createElement(ke,{client:e,children:Y.createElement(He,{attribute:"class",defaultTheme:"light",enableSystem:!0,themes:["light","dark"],children:Y.createElement($e,{initialState:{},children:Y.createElement(t)})})})}],globalTypes:{theme:{description:"Global theme for components",defaultValue:"light",toolbar:{title:"Theme",icon:"paintbrush",items:[{value:"light",title:"Light",icon:"sun"},{value:"dark",title:"Dark",icon:"moon"}],dynamicTitle:!0}}}};export{Xe as default};
